(function(e,r){typeof exports=="object"&&typeof module<"u"?r(exports,require("@dzangolab/fastify-mercurius"),require("fastify-plugin"),require("@dzangolab/fastify-slonik")):typeof define=="function"&&define.amd?define(["exports","@dzangolab/fastify-mercurius","fastify-plugin","@dzangolab/fastify-slonik"],r):(e=typeof globalThis<"u"?globalThis:e||self,r(e.DzangolabFastifyUser={},e.DzangolabFastifyConfig,e.FastifyPlugin,e.DzangolabFastifySlonik))})(this,function(e,r,f,o){"use strict";const c=f((t,s,i)=>{i()});class u extends o.DefaultSqlFactory{}class a extends o.BaseService{static TABLE="users";static LIMIT_DEFAULT=20;static LIMIT_MAX=50;constructor(s,i,n){super(s,i,n)}get factory(){if(!this.table)throw new Error("Service table is not defined");return this._factory||(this._factory=new u(this)),this._factory}}const l={Query:{user:async(t,s,i)=>await new a(i.config,i.database).findById(s.id),users:async(t,s,i)=>await new a(i.config,i.database).list(s.limit,s.offset)}},d=async(t,s,i)=>{t.get("/users",{preHandler:t.verifySession()},async(n,y)=>{const g=new a(n.config,n.slonik),{limit:p,offset:v}=n.query,b=await g.list(p,v);y.send(b)}),i()};e.UserProfileService=a,e.default=c,e.userProfileResolver=l,e.userProfileRoutes=d,Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
